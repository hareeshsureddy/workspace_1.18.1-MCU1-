/**
  ******************************************************************************
  * @file    main.c
  * @author  Auto-generated by STM32CubeIDE
  * @version V1.0
  * @brief   Default main function.
  ******************************************************************************
*/
#include <stdint.h>
#include <stm32f407xx.h>
#include "stm32f407xx_gpio_drive.h"
int main(void)
{
    /* Loop forever */
	/*Configure the Pin 14 in a GPIOA, with output and Push pull */
	GPIO_handle_t GPIO_Congig_data;
	GPIO_Congig_data.GPIO_confg.GPIO_PinNumber=GPIO_PIN_14;
	GPIO_Congig_data.GPIO_confg.GPIO_PinMode=GPIO_MODE_OUT;
	GPIO_Congig_data.GPIO_confg.GPIO_PinSpeed=GPIO_SPEED_V_HIGH;
	GPIO_Congig_data.GPIO_confg.GPIO_PinPupdControl=GPIO_NO_PUPD;
	GPIO_Congig_data.GPIO_confg.GPIO_PinOPtype=GPIO_OUTTYPE_PP; /*Push pull configuration*/
	//GPIO_Congig_data.GPIO_confg.GPIO_PinOPtype=GPIO_OUTTYPE_OD; /*Open drain configuration*/
	GPIO_Congig_data.pGPIOx=GPIOA;
	GPIO_handle_t *pGPIOx_handle=&GPIO_Congig_data;
	/*Enable GPIOA Peripheral clock*/
	GPIO_PeripClkCntr_Alt('A',ENABLE);
	GPIO_Init(pGPIOx_handle);
	/*Configure the Pin 4 in a GPIOB, with input mode and internal pull down*/
	GPIO_Congig_data.GPIO_confg.GPIO_PinNumber=GPIO_PIN_4;
	GPIO_Congig_data.GPIO_confg.GPIO_PinMode=GPIO_MODE_IN;
	GPIO_Congig_data.GPIO_confg.GPIO_PinSpeed=GPIO_SPEED_V_HIGH;
	GPIO_Congig_data.GPIO_confg.GPIO_PinPupdControl=GPIO_NO_PUPD;	/*External PD i sthere*/
	GPIO_Congig_data.pGPIOx=GPIOB;
	GPIO_Init(pGPIOx_handle);
	while(1){
		while(GPIO_ReadfromInputPin(GPIOB,GPIO_PIN_14)){
		uint32_t delay=1000000;
		GPIO_ToggleOutPin(GPIOA,GPIO_PIN_14);
		while(delay){
			delay--;
		}
		}
	/* Toggling the GPIOA Pin 14 with Push pull configuration */
	}

}
